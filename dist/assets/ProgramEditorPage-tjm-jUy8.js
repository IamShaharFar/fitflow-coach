import{i as h,u as j,j as s}from"./index-Cb54uHzU.js";import{u as y,a as g,I as a,B as o}from"./Input-Cdi0hLWf.js";import{u as b,a as c}from"./api-D8uYHb8c.js";function $(){const{traineeId:i,programId:r}=h(),d=j(),m=b({queryKey:["coach-program",i,r],queryFn:async()=>r?c.trainee.programs.get(r):null}),{control:u,register:e,handleSubmit:x}=y({defaultValues:m.data||{name:"",notes:"",sessions:[{title:"סשן 1",exercises:[{name:"סקווט",sets:3,reps:8}]}]}}),l=g({control:u,name:"sessions"}),p=async n=>{r?await c.coach.trainees.programs.update(i,r,n):await c.coach.trainees.programs.create(i,n),d(`/coach/trainees/${i}`)};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:r?"עריכת תוכנית":"יצירת תוכנית"}),s.jsxs("form",{onSubmit:x(p),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"שם תוכנית"}),s.jsx(a,{...e("name",{required:!0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"הערות"}),s.jsx(a,{...e("notes")})]}),s.jsxs("div",{className:"space-y-4",children:[l.fields.map((n,t)=>s.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(a,{placeholder:"כותרת",...e(`sessions.${t}.title`,{required:!0})}),s.jsx(a,{type:"date",...e(`sessions.${t}.date`)})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[s.jsx(a,{placeholder:"תרגיל",...e(`sessions.${t}.exercises.0.name`,{required:!0})}),s.jsx(a,{type:"number",placeholder:"סטים",...e(`sessions.${t}.exercises.0.sets`,{valueAsNumber:!0})}),s.jsx(a,{type:"number",placeholder:"חזרות",...e(`sessions.${t}.exercises.0.reps`,{valueAsNumber:!0})})]})})]},n.id)),s.jsx(o,{type:"button",variant:"secondary",onClick:()=>l.append({title:"סשן חדש",exercises:[{name:"",sets:3,reps:10}]}),children:"הוסף סשן"})]}),s.jsx("div",{className:"flex justify-end gap-2",children:s.jsx(o,{type:"submit",children:"שמור"})})]})]})}export{$ as default};
